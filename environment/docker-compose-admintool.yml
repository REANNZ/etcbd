# TODO
# - Mail transport

#reverse proxy / ssl termination / static file handling
apache:
    restart: always
    build: ./apache/
    container_name: apache
    #log_driver: syslog
    ports:
        - "80:80"
        - "443:443"
    volumes:
        - /etc/ssl:/etc/ssl:ro
    volumes_from:
        #get access to the static files.
        - djnro
        #?- kibana
    #links to reverse proxy the admin tool and kibana
    links:
        - "djnro:djnro"
        #- "kibana:kibana"

djnro:
    restart: always
    build: ./djnro/
    container_name: djnro
    #log_driver: syslog
    env_file: localdev_djnro.env
    volumes:
        - /code
    links:
        - "postgres:postgres"

postgres:
    restart: always
    container_name: postgres
    build: ./postgres/
    #log_driver: syslog
    volumes:
        - /var/lib/docker-host-volumes/postgres-data:/var/lib/postgresql/data
