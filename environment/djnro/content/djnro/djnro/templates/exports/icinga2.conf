{% comment %}
    Expects the following in the context:
        nroservers: the list of NROServer hashes
        allinstrealmmons: realms to generate checks for (for NRO servers)
        instservers: list of InstServers to generate checks for
        confparams: configuration paramters
        allcontacts: list of all contacts (to render as Icinga users)
{% endcomment %}
{% autoescape off %}
{% load addstr %}
{% load icingaescape %}
{% load instserver2instrealmmon %}
{% load instserver2contacts %}
{% include "exports/icinga2_contacts.conf" with contacts=allcontacts only %}
{% for server in nroservers %}
{# Note: not passing servercontacts to NRO servers #}
{% include "exports/icinga2_host.conf" with server=server instrealmmons=allinstrealmmons confparams=confparams only %}
{% endfor %}
{% for server in instservers %}
{% include "exports/icinga2_host.conf" with server=server instrealmmons=server|instserver2instrealmmon servercontacts=server|instserver2contacts confparams=confparams only %}
{% endfor %}
{% endautoescape %}
